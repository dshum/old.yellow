<div ng-controller="UsersController">
	<ul class="breadcrumb">
		<li class="active">Управление пользователями</li>
	</ul>
	<p>Добавить: <a ui-sref="base.groupAdd">Группа</a>, <a ui-sref="base.userAdd">Пользователь</a></p>
	<div ng-show="groupList.length">
		<span class="h2">Группы</span>
		<div class="table-responsive">
			<table class="element-list table-striped table-hover">
				<thead>
					<th class="first"></th>
					<th>Название</th>
					<th>Управление пользователями</th>
					<th>Доступ по умолчанию</th>
					<th>Доступ к элементам</th>
					<th>Создана</th>
					<th>Обновлена</th>
					<th class="last"><span class="halflings halflings-remove-circle"></span></th>
				</thead>
				<tbody>
				<tr ng-repeat="group in groupList">
					<td class="first"><a ui-sref="base.groupUsers({id: group.id})"><span class="halflings halflings-menu-right"></span></a></td>
					<td><a ui-sref="base.group({id: group.id})">{{group.name}}</a></td>
					<td>{{group.admin ? 'Да' : 'Нет'}}</td>
					<td><a ui-sref="base.groupItems({id: group.id})">Редактировать</a></td>
					<td><a ui-sref="base.groupElements({id: group.id})">Редактировать</a></td>
					<td>{{Helper.toDate(group.created_at) | date: 'dd.MM.yyyy'}}<br /><small>{{Helper.toDate(group.created_at) | date: 'HH:mm:ss'}}</small></td>
					<td>{{Helper.toDate(group.updated_at) | date: 'dd.MM.yyyy'}}<br /><small>{{Helper.toDate(group.updated_at) | date: 'HH:mm:ss'}}</small></td>
					<td class="last"><span class="hand danger" ng-click="deleteGroup(group)" title="Удалить"><span class="halflings halflings-remove-circle"></span></span></td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div ng-show="userList.length">
		<span class="h2">Пользователи</span>
		<div class="table-responsive">
			<table class="element-list table-striped table-hover">
				<thead>
					<th class="first"></th>
					<th>Логин</th>
					<th>E-mail</th>
					<th>Имя</th>
					<th>Фамилия</th>
					<th>Группы</th>
					<th>Создан</th>
					<th>Последний вход</th>
					<th class="last"><span class="halflings halflings-remove-circle"></span></th>
				</thead>
				<tbody>
				<tr ng-repeat="user in userList">
					<td class="first"><a ui-sref="base.log({id: user.id})"><span class="halflings halflings-menu-right"></span></a></td>
					<td><a ui-sref="base.user({id: user.id})">{{user.login}}</a></td>
					<td>{{user.email}}</td>
					<td>{{user.first_name}}</td>
					<td>{{user.last_name}}</td>
					<td>
						<div ng-repeat="group in user.groups"><a ui-sref="base.group({id: group.id})">{{group.name}}</a></div>
						<div ng-show="user.isSuperUser"><strong>Суперпользователь</strong></div>
					</td>
					<td>{{Helper.toDate(user.created_at) | date: 'dd.MM.yyyy'}}<br /><small>{{Helper.toDate(user.created_at) | date: 'HH:mm:ss'}}</small></td>
					<td><span ng-show="user.last_login">{{Helper.toDate(user.last_login) | date: 'dd.MM.yyyy'}}<br /><small>{{Helper.toDate(user.last_login) | date: 'HH:mm:ss'}}</small></span></td>
					<td class="last"><span class="hand danger" ng-click="deleteUser(user)" title="Удалить"><span class="halflings halflings-remove-circle"></span></span></td>
				</tr>
				</tbody>
			</table>
		</div>
		<p><a ui-sref="base.log">Журнал действий пользователей</a></p>
	</div>
</div>